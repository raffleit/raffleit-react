(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{40:function(e,t,n){e.exports=n(55)},45:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"participants",function(){return h}),n.d(r,"form",function(){return N});var a={};n.r(a),n.d(a,"winners",function(){return I});var c=n(1),i=n.n(c),o=n(29),u=n.n(o),l=(n(45),n(8)),s=n(12),m=n(16),d=n(22),p="ADD_PARTICIPANT";var f="UPDATE_PARTICIPANT_FORM";var v="ADD_VALIDATION_ERROR";var b="REMOVE_VALIDATION_ERROR";var E="REMOVE_PARTICIPANT";var O="DECREASE_TICKETS_FOR_PARTICIPANT";function y(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:var n=Object(l.a)({},t.participant,{id:y()});return Object(d.a)(e).concat([n]);case E:return e.filter(function(e){return e.id!==t.id});case O:return e.map(function(e){return e.id!==t.id?e:Object(l.a)({},e,{numberOfTickets:e.numberOfTickets-1})});default:return e}}var k={name:"",numberOfTickets:"",errors:{}};function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(l.a)({},e,Object(m.a)({},t.key,t.value));case v:var n=Object(l.a)({},e.errors,Object(m.a)({},t.key,t.value));return Object(l.a)({},e,{errors:n});case b:var r=e.errors;return delete r[t.key],Object(l.a)({},e,{errors:r});case p:return k;default:return e}}var g="ADD_WINNER";function j(e){return{type:g,winner:e}}var w="DRAW_WINNER";function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return[t.winner].concat(Object(d.a)(e));default:return e}}var P="RESET_ALL";var T=Object(s.c)(Object(l.a)({},a,r)),A=function(e,t){return t.type===P&&(e=void 0),T(e,t)},R=n(11),D=n(61),S=n(59),_=n(60),C=n(32),x=n(33),M=n(37),F=n(34),V=n(38),W={rootStyle:{marginBottom:"2em"},normalInput:{},errorInput:{border:"1px solid red"}},J=function(e){function t(){var e,n;Object(C.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(M.a)(this,(e=Object(F.a)(t)).call.apply(e,[this].concat(a)))).addParticipant=function(e){e.preventDefault();var t=n.props,r=t.addValidationError,a=t.addParticipant,c=t.form,i=c.name,o=parseInt(c.numberOfTickets,10);i&&o?(a({name:i,numberOfTickets:o}),n.refs.focusOnMe.focus()):(i||(r("name","Feltet er p\xe5krevd"),n.refs.focusOnMe.focus()),o||r("numberOfTickets","Feltet er p\xe5krevd"))},n.decideInputStyle=function(e){return n.props.form.errors[e]?W.errorInput:W.normalInput},n}return Object(V.a)(t,e),Object(x.a)(t,[{key:"render",value:function(){var e=this.props,t=e.form,n=e.updateParticipantForm;return c.createElement("form",{onSubmit:this.addParticipant},c.createElement("div",{className:"row",style:W.rootStyle},c.createElement("div",{className:"form-group col-md-6"},c.createElement("input",{type:"text",onChange:n,name:"name",value:t.name,className:"form-control",placeholder:"Name",ref:"focusOnMe",style:this.decideInputStyle("name")})),c.createElement("div",{className:"form-group col-md-4"},c.createElement("input",{type:"number",name:"numberOfTickets",className:"form-control",value:t.numberOfTickets,placeholder:"# tickets",onChange:n,style:this.decideInputStyle("numberOfTickets")})),c.createElement("div",{className:"col-md-1"},c.createElement("input",{type:"submit",className:"btn btn-primary",value:"+"}))))}}]),t}(c.Component),L=Object(R.b)(function(e){return{participants:e.participants,form:e.form}},function(e){return{actions:{addParticipant:function(t){e(function(e){return{type:p,participant:e}}(t))},removeParticipant:function(t){e(function(e){return{type:E,id:e}}(t))},addValidationError:function(t,n){e(function(e,t){return{type:v,key:e,value:t}}(t,n))},updateParticipantForm:function(t){return e((n=t.target.name,r=t.target.value,{type:f,key:n,value:r}));var n,r}}}})(function(e){var t=e.actions,n=e.form,r=e.participants;return i.a.createElement("div",{className:"col-md-5"},i.a.createElement(J,{form:n,updateParticipantForm:t.updateParticipantForm,addValidationError:t.addValidationError,addParticipant:t.addParticipant}),r.length>0&&i.a.createElement("table",{className:"table"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("td",null,"Name"),i.a.createElement("td",null,"# tickets"),i.a.createElement("td",null))),i.a.createElement("tbody",null,r.map(function(e){return i.a.createElement("tr",{key:e.id},i.a.createElement("td",null,e.name),i.a.createElement("td",null,e.numberOfTickets),i.a.createElement("td",null,i.a.createElement("button",{className:"btn btn-link",onClick:function(){return t.removeParticipant(e.id)}},"Remove")))}))))}),B=Object(R.b)(function(e){return{winners:e.winners}},function(e){return{actions:{drawWinner:function(){return e({type:w})}}}})(function(e){var t=e.actions,n=e.winners;return i.a.createElement("div",{className:"col-md-7"},i.a.createElement("button",{className:"btn btn-success btn-lg",onClick:t.drawWinner},"Draw"),i.a.createElement("ul",{className:"list-unstyled"},n.map(function(e){return i.a.createElement("li",{key:e.id,style:{fontSize:"3em"}},e.name)})))}),z=n(36),K=n(17),U=n.n(K),q=n(14);var G=function(e){var t=function(e){return e.map(function(e){return Array(e.numberOfTickets).fill(e)}).reduce(function(e,t){return e.concat(t)})}(e);return t[Math.floor(Math.random()*t.length)]},H=U.a.mark(X),Q=U.a.mark(Y);function X(){var e,t,n,r;return U.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(q.b)();case 2:if(e=a.sent,t=e.participants,!(n=G(t))){a.next=11;break}return r={name:n.name,id:y()},a.next=9,Object(q.a)(j(r));case 9:return a.next=11,Object(q.a)((c=n.id,{type:O,id:c}));case 11:case"end":return a.stop()}var c},H,this)}function Y(){return U.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(q.c)(w,X);case 2:case"end":return e.stop()}},Q,this)}var Z=Y,$=n(57),ee=n(56),te=Object($.a)(function(e){e.match;var t=e.location,n=e.to,r=e.children,a=t.pathname===n?"active":"";return i.a.createElement("li",{className:a},i.a.createElement(ee.a,{to:n},r))}),ne=Object(R.b)(null,function(e){return{reset:function(){return e({type:P})}}})(function(e){var t=e.reset;return i.a.createElement("div",{className:"reset"},i.a.createElement(ee.a,{to:"/Participants",onClick:t},"Reset"))}),re=n(58),ae=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}}(),ce=Object(z.a)(),ie=s.d,oe=Object(s.e)(A,ae,ie(Object(s.a)(ce)));oe.subscribe(function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(n){console.error(n)}}(oe.getState())}),ce.run(Z);u.a.render(i.a.createElement(R.a,{store:oe},i.a.createElement(D.a,null,i.a.createElement("div",{className:"container"},i.a.createElement(ne,null),i.a.createElement("ul",{className:"nav nav-pills"},i.a.createElement(te,{to:"/Participants"},"Participants"),i.a.createElement(te,{to:"/Drawing"},"Drawing")),i.a.createElement("div",{className:"row",style:{marginTop:"2em"}},i.a.createElement(re.a,null,i.a.createElement(S.a,{path:"/Participants",component:L}),i.a.createElement(S.a,{path:"/Drawing",component:B}),i.a.createElement(_.a,{from:"/",exact:!0,to:"/Participants"})))))),document.getElementById("root"))}},[[40,2,1]]]);
//# sourceMappingURL=main.e5a7eb46.chunk.js.map